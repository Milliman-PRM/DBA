# DBA
> A place for a DBA to do DBA type stuff

**Do not delete scripts or documentation related to retired *production* servers from this repository.** Instead, update them to indicate that the referenced server is no longer in production.

## Folder Structure

It is unlikely that anything will need to go in the top level of this repository, with the exception of this readme.

**Scripts**

Only scripts that work on multiple types of DBMS (e.g. PostgreSQL and SQL Server) should go directly into this folder.

One subfolder will be created per-server type. Scripts that are generic to that server type should be created at this level. Scripts that are server-specific should be placed into a subfolder with that server's name (e.g. Scripts/pgsql/indy-pgsql01/).

An individual server may have a folder in more than one DBMS folder, as some servers host both PostgreSQL and MongoDB, for example.

**Scripts/pgsql/dumps**

One script for each PostgreSQL server, which can be used to reconstruct the structure of a server's databases as well as user/group roles and their privileges. Use git blame to track down when a change was made.

The scripts in this folder are generated by [Jenkins jobs](https://indy-github.milliman.com/IndyHealth/jenkins/blob/master/job_definitions/PostgreSQL/dumps.yaml), which leverage `pg_dumpall`. Modify the linked YAML file and publish to Jenkins to set up dumps for additional servers or to remove retired servers.

## Other useful references

[Database server documentation on IndyIT/PRM-Misc](https://indy-github.milliman.com/IndyIT/PRM-Misc/tree/master/Database%20Documentation) - General information about the software and databases present on database servers.  
